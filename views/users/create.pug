extends ../layout

block content
    h3.text-center New Survey


    form(method='post', action='')
        #newlink
            div
                table(border='0')
                    tbody
                        tr
                            td
                                input(name="survey_title" placeholder="title of survey")
                        tr
                            td  Question: 
                            td
                                input(type='text', name='question_title')
                        tr
                            td  Question Type: 
                            td
                                select.form-control.type(name="question_type", onchange='changeFunc();')
                                    option(value='multiple', selected='') Multiple Choice
                                    option(value='agree') Agree/Disagree
                                    option(value='short') Short Answer
                        //- tr#newChoice
                        //-     td
                        //-         input(name="survey_title" placeholder="title of survey")
                        //-     a(href='javascript:new_choice()') Add New Choice

        p#addnew
            a(href='javascript:new_link()') Add New
        p
            br
            input(type='submit', name='submit1')
            input(type='reset', name='reset1')
    // Template
    #newlinktpl(style='display:none')
        div
            table(border='0')                    
                tbody
                    tr                            
                        td  Question: 
                        td
                            input(type='text', name='question_title')
                    tr
                        td  Question Type: 
                        td
                            select.form-control.type(name="question_type", onchange='changeFunc();')
                                option(value='multiple', selected='') Multiple Choice
                                option(value='agree') Agree/Disagree
                                option(value='short') Short Answer


    //- form(method="POST")
    //-     .form-group
    //-     label(for='exampleInputEmail1') Survey Name
    //-     input#inputSurveyName.form-control(type='text', aria-describedby='emailHelp', placeholder='Survey name')

    //-     .form-group
    //-     label(for='exampleFormControlSelect1') Type
    //-     select#exampleFormControlSelect1.form-control(onchange='changeFunc();')
    //-         option(value='multiple', selected='') Multiple Choice
    //-         option(value='agree') Agree/Disagree
    //-         option(value='short') Short Answer
        
    //-     #question1

    //-     //- input(name="title" placeholder="title of project")
    //-     //- input(name="grade" type="number")
    //-     //- input(name="class.title" placeholder="Class Title")
    //-     //- input(name="class.courseCode" placeholder="CourseCode")
    //-     //- input(name="class.teacher" placeholder="Teacher")

    //-     button.btn.btn-primary(type='submit') Create Survey

    script.
        var ct = 1;
        function new_link()
        {
        ct++;
        var div1 = document.createElement('div');
        div1.id = ct;
        // link to delete extended form elements
        var delLink = '<div style="text-align:right;margin-right:65px"><a href="javascript:delIt('+ ct +')">Del</a></div>';
        div1.innerHTML = document.getElementById('newlinktpl').innerHTML + delLink;
        document.getElementById('newlink').appendChild(div1);
        }
        //- function new_choice()
        //- {
        //- var tr1 = document.createElement('tr');
        //- let uuid = create_UUID()
        //- tr1.id = uuid;
        //- // link to delete extended form elements
        //- var delLink = '<div style="text-align:right;margin-right:65px"><a href="javascript:delIt('+ uuid +')">Del</a></div>';
        //- tr1.innerHTML = document.getElementById('newlinktpl').innerHTML + delLink;
        //- document.getElementById('newlink').appendChild(tr1);
        //- }
        function create_UUID()
        {
        var dt = new Date().getTime();
        var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
            var r = (dt + Math.random()*16)%16 | 0;
            dt = Math.floor(dt/16);
            return (c=='x' ? r :(r&0x3|0x8)).toString(16);
        });
        return uuid;
        }
        // function to delete the newly added set of elements
        function delIt(eleId)
        {
        d = document;
        var ele = d.getElementById(eleId);
        var parentEle = d.getElementById('newlink');
        parentEle.removeChild(ele);
        }


    script.
        window.onload = changeFunc;

        function changeFunc() {
            let types = document.querySelectorAll('.type')
            types.filter(type => type[types.selectedIndex].value === 'multiple')
            var propertyType = document.getElementById('exampleFormControlSelect1');
            if (propertyType[propertyType.selectedIndex].value == 'multiple') {
                let question = document.querySelector('#question1')
                question.innerHTML = `<div class="form-check"><input class="form-check-input" type="checkbox" value="" id="defaultCheck1"><label class="form-check-label" for="defaultCheck1">Default checkbox</label></div>
                <div class="form-check"><input class="form-check-input" type="checkbox" value="" id="defaultCheck1"><label class="form-check-label" for="defaultCheck1">Default checkbox</label></div>`
            }

 


